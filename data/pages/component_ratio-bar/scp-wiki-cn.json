{
  "title": "评分占比条",
  "content": "[!-- {$base}]\n[[module ListPages name=\"=\"]]\n[[module%%content{0}%% CSS]]\n:root {\n    --rate-percentage: max(calc(100%*(((%%rating%% + %%rating_votes%%)/2)/(%%rating_votes%% + 0.0001) + 0.001)), 0.001%);\n    /* Controls to upvote/downvote ratio expressed in the pseudo-element */\n\n    --greymaker: min(%%rating_votes%%, 1);\n    /* Greyscale the ratio bar if number of votes = 0 */\n}\n[[/module%%content{0}%%]]\n[[/module]]\n\n[[module CSS]]\n:root {\n    --positiveColor: rgb(var(--rating-module-button-plus-color, 144,238,144));\n    --negativeColor: rgb(var(--rating-module-button-negative-color, 255,192,203));\n}\n\n.page-rate-widget-box {\n    position: relative;\n}\n#main-content .page-rate-widget-box > *:not(.creditBottomRate .page-rate-widget-box > *) {\n    border-bottom-width: 0.45em;\n}\n.page-rate-widget-box::after {\n    content: \"\";\n    display: block;\n    width: 95%;\n    margin: 0.1em auto;\n    position: relative;\n    height: 0.225em;\n    background-color: grey;\n    border-radius: inherit;\n    z-index: 2;\n\n    background: linear-gradient(\n        90deg,\n        var(--positiveColor) var(--rate-percentage),\n        var(--negativeColor) var(--rate-percentage)\n    );\n    filter: saturate(var(--greymaker));\n}\n\n.rate-box-with-credit-button {\n    display: flex;\n    align-items: stretch;\n}\n.rate-box-with-credit-button .page-rate-widget-box::after {\n    margin: 0.1em auto 0.075em;\n}\n#page-content .rate-box-with-credit-button .creditButton {\n    display: flex;\n    align-items: center;\n}\n#page-content .creditButton p a {\n    margin-left: inherit;\n    line-height: calc(100% + 0.65em);\n}\n\ndiv.creditBottomRate .page-rate-widget-box::after {\n    display: none;\n}\n[[/module]]\n[!-- --]\n\n\n\n[!-- {$ex}]\n[[module CSS]]\n#main-content .page-rate-widget-box:not(.creditBottomRate .page-rate-widget-box) {\n    --rating-module-bottom-border-color: initial;\n    padding-bottom: 0.15em;\n}\n.page-rate-widget-box::after {\n    width: 100%;\n    border-radius: inherit;\n    right: 0;\n    bottom: -0.1em;\n    position: absolute;\n}\n\n#main-content #page-content .rate-box-with-credit-button {\n    --rating-module-bottom-border-color: initial;\n    position: relative;\n    padding-bottom: 0.15em;\n}\n#main-content #page-content .rate-box-with-credit-button .page-rate-widget-box {\n    display: contents;\n}\n#page-content .rate-box-with-credit-button .page-rate-widget-box::after {\n    position: absolute;\n    width: 100%;\n    margin: 0;\n    bottom: 0;\n}\n\n#page-content .creditButton p a {\n    line-height: inherit;\n}\n[[/module]]\n[!-- --]\n\n\n[!-- {$pie}]\n[[module CSS]]\n:root {\n    --info-circle-size: 12.5rem;\n\n    --info-up-bg: rgb(var(--rating-module-button-plus-color, 144,238,144));\n    --info-down-bg: rgb(var(--rating-module-button-negative-color, 255,192,203));\n    --info-border-color: rgba(var(--swatch-border-color, 187,0,17),0.25);\n}\n.list-pages-box .rate_t3 {\n    display: block;\n    padding: 0;\n    margin: 0.5rem auto 0;\n    width: -webkit-max-content;\n    width: -moz-max-content;\n    width: max-content;\n    overflow: hidden;\n}\n.list-pages-box .rate_t3 .wrap {\n    border-bottom: 1px solid var(--info-border-color);\n    display: inline-block;\n    width: var(--info-circle-size);\n    height: calc(var(--info-circle-size) / 2);\n    -webkit-clip-path: polygon(-10% -10%, 110% -10%, 110% 99%, -10% 99%);\n                clip-path: polygon(-10% -10%, 110% -10%, 110% 99%, -10% 99%);\n}\n.list-pages-box .rate_t3 .cir {\n    width: var(--info-circle-size);\n    height: var(--info-circle-size);\n    margin: 0;\n    padding: 0;\n    transform: rotate(-90deg);\n}\n.list-pages-box .rate_t3 .rad {\n    width: calc(100% - 2px);\n    height: 0;\n    padding: calc(50% - 1px) 0 0;\n    margin: 0;\n    border: solid var(--info-border-color);\n}\n.list-pages-box .rate_t3 .rad_def {\n    background: gray;\n    border-radius: 50%;\n    width: calc(100% - 2px);\n    height: 0;\n    padding: calc(100% - 2px) 0 0;\n    margin: 0;\n    border: 1px solid var(--info-border-color);\n}\n.list-pages-box .rate_t3 .uv {\n    border-radius: 100rem 100rem 0 0;\n    background: var(--info-up-bg);\n    border-width: 1px 1px 0;\n}\n.list-pages-box .rate_t3 .dv {\n    border-radius: 0 0 100rem 100rem;\n    background: var(--info-down-bg);\n    border-width: 0 1px 1px;\n}\n[[/module]]\n\n[[module ListPages name=\"=\"]]\n[[table class=\"rate_t3\"]]\n[[row]]\n[[cell colspan=\"2\" style=\"display:[[#ifexpr %%rating_votes%% == 0 | none | table-cell ]];\"]]\n[[div class=\"wrap\"]]\n[[div class=\"cir\" style=\"transform: rotate([[#expr (%%rating_votes%%-%%rating%%)/2/%%rating_votes%%*(-180)]]deg)\"]]\n[[div class=\"rad uv\"]]\n[[/div]]\n[[div class=\"rad dv\"]]\n[[/div]]\n[[/div]]\n[[/div]]\n[[/cell]]\n[[cell colspan=\"2\" style=\"display:[[#ifexpr %%rating_votes%% == 0 | table-cell | none ]];\"]]\n[[div class=\"wrap\"]]\n[[div class=\"cir\"]]\n[[div class=\"rad_def\"]]\n[[/div]]\n[[/div]]\n[[/div]]\n[[/cell]]\n[[/row]]\n\n[[row style=\"display: [[#ifexpr %%rating_votes%% == 0 | none | table-row ]];\"]]\n[[cell style=\"text-align: left;\"]]\n[[#expr 100 - (%%rating_votes%%-%%rating%%)/2/%%rating_votes%%*100*100%10000/100]]%\n(+[[#expr (%%rating%%+%%rating_votes%%)/2]])\n[[/cell]]\n[[cell style=\"text-align: right;\"]]\n[[#expr (%%rating_votes%%-%%rating%%)/2/%%rating_votes%%*100*100%10000/100]]%\n(-[[#expr (%%rating_votes%%-%%rating%%)/2]])\n[[/cell]]\n[[/row]]\n\n[[row style=\"display:[[#ifexpr %%rating_votes%% == 0 | table-row | none ]];\"]]\n[[cell style=\"text-align: left;\"]]\n-%\n(+0)\n[[/cell]]\n[[cell style=\"text-align: right;\"]]\n-%\n(-0)\n[[/cell]]\n[[/row]]\n\n[[/table]]\n[[/module]]\n[!-- --]\n\n[[iftags +组件]]\n\n> **评分信息**组件为 [[*user 7happy7]] 原创，且随后由 [[*user EstrellaYoshte]] 根据英文维基的技术守则改造为**评分占比条**。\n\n[[div style=\"border: 1px solid #ddd; padding: 1em;\"]]\n若需添加评分占比条，请将以下代码放置在任何版式的 {{[[include]]}} 后方：\n\n> {{@@[[include :scp-wiki:component:ratio-bar base=--]]@@}}\n\n这将应用至所有已存在的评分模块当中：\n[[=image https://hoah-lab.wdfiles.com/local--files/component:ratio-bar/ratio1.png width=\"50%\"]]\n\n若需应用至某些对评分模块影响更大的版式之中，比如[[[theme:black-highlighter-theme|]]]与[[[theme:inkblot|]]]，则需要另一个参数：\n\n> {{@@[[include :scp-wiki:component:ratio-bar base=-- |ex=--]]@@}}\n\n额外的兼容性参数是为了在基础评分模块广泛被版式的 CSS 自定义的情况下涵盖所有评分模块。\n\n一般来说，该参数是专为黑标及基于黑标的版式设定的。对于其它版式，可以在一开始只添加 {{base}} 参数，并按需添加 {{@@|ex=--@@}}。\n\n@@ @@\n-----\n@@ @@\n\n本组件另带有一个独立的饼图模块：\n\n> {{@@[[include :scp-wiki:component:ratio-bar pie=--]]@@}}\n\n给个使用建议，该模块可以放置在信息模块或者类似的东西里面：\n\n[[=image http://hoah-lab.wdfiles.com/local--files/component:ratio-bar/ratio2.png width=\"60%\"]]\n\n> {{@@[[include :scp-wiki-cn:credit:start]]@@}}\n> @@**SCP-XXXX：**标题@@\n> @@**故事/GoI 格式名称**@@\n> {{@@[[include :scp-wiki:component:ratio-bar pie=--]]@@}}\n> {{@@[[include :scp-wiki-cn:credit:end]]@@}}\n\n[[/div]]\n\n[[/iftags]]",
  "tags": [
    "组件"
  ],
  "author": "hoah2333",
  "created_at": "2021-08-23T02:27:33+00:00",
  "updated_at": "2021-09-06T04:32:07+00:00",
  "rating": 4,
  "_site": "scp-wiki-cn",
  "_fullname": "component:ratio-bar"
}