{
  "title": "Ratio Bar",
  "content": "[[module CSS]]\n:where(:root) {\n    /*Basalt compatibility */\n    --rating-module-button-plus-color: var(--rate-module-upvote-color);\n    --rating-module-button-negative-color: var(--rate-module-downvote-color);\n    /*BHL compatibility */\n    --positiveColor: rgb(var(--rating-module-button-plus-color, 144,238,144));\n    --negativeColor: rgb(var(--rating-module-button-negative-color, 255,192,203));\n}\n[[/module]]\n\n[!-- {$base}]\n[[module ListPages name=\"=\"]]\n[[module%%content{0}%% CSS]]\n:root {\n    --rate-percentage: max(calc(100%*(((%%rating%% + %%rating_votes%%)/2)/(%%rating_votes%% + 0.0001) + 0.001)), 0.001%);\n    /* Controls to upvote/downvote ratio expressed in the pseudo-element */\n\n    --greymaker: min(%%rating_votes%%, 1);\n    /* Greyscale the ratio bar if number of votes = 0 */\n}\n[[/module%%content{0}%%]]\n[[/module]]\n\n[[module CSS]]\n.page-rate-widget-box {\n    position: relative;\n}\n#main-content .page-rate-widget-box > *:where(:not(.creditBottomRate .page-rate-widget-box > *)) {\n    border-bottom-width: 0.45em;\n}\n.page-rate-widget-box::after {\n    content: \"\";\n    display: block;\n    width: 95%;\n    margin: 0.1em auto;\n    position: relative;\n    height: 0.225em;\n    background-color: grey;\n    border-radius: inherit;\n    z-index: 2;\n\n    background: linear-gradient(\n        90deg,\n        var(--positiveColor) var(--rate-percentage),\n        var(--negativeColor) var(--rate-percentage)\n    );\n    filter: saturate(var(--greymaker));\n}\n\n.rate-box-with-credit-button {\n    display: flex;\n    align-items: stretch;\n}\n.rate-box-with-credit-button .page-rate-widget-box::after {\n    margin: 0.1em auto 0.075em;\n}\n#page-content .rate-box-with-credit-button .creditButton {\n    display: flex;\n    align-items: center;\n}\n#page-content .creditButton p a {\n    margin-left: inherit;\n}\n\ndiv.creditBottomRate .page-rate-widget-box::after {\n    display: none;\n}\n[[/module]]\n[!-- --]\n\n\n\n[!-- {$ex}]\n[[module CSS]]\n#main-content .page-rate-widget-box:not(.creditBottomRate .page-rate-widget-box) {\n    --rating-module-bottom-border-color: initial;\n    padding-bottom: 0.15em;\n}\n.page-rate-widget-box::after {\n    width: 100%;\n    border-radius: inherit;\n    right: 0;\n    bottom: -0.1em;\n    position: absolute;\n}\n\n#main-content #page-content .rate-box-with-credit-button {\n    --rating-module-bottom-border-color: initial;\n    position: relative;\n    padding-bottom: 0.15em;\n}\n#main-content #page-content .rate-box-with-credit-button .page-rate-widget-box {\n    display: contents;\n}\n#page-content .rate-box-with-credit-button .page-rate-widget-box::after {\n    position: absolute;\n    width: 100%;\n    margin: 0;\n    bottom: 0;\n}\n\n[[/module]]\n[!-- --]\n\n\n\n[!-- {$pie}]\n[[module CSS]]\n:root {\n    --info-circle-size: 12.5rem;\n\n    --info-up-bg: var(--positiveColor);\n    --info-down-bg: var(--negativeColor);\n    --info-border-color: rgba(var(--swatch-border-color, 187,0,17),0.25);\n}\n.list-pages-box .rate_t3 {\n    display: block;\n    padding: 0;\n    margin: 0.5rem auto 0;\n    width: -webkit-max-content;\n    width: -moz-max-content;\n    width: max-content;\n    overflow: hidden;\n}\n.list-pages-box .rate_t3 .wrap {\n    border-bottom: 1px solid var(--info-border-color);\n    display: inline-block;\n    width: var(--info-circle-size);\n    height: calc(var(--info-circle-size) / 2);\n    -webkit-clip-path: polygon(-10% -10%, 110% -10%, 110% 99%, -10% 99%);\n                clip-path: polygon(-10% -10%, 110% -10%, 110% 99%, -10% 99%);\n}\n.list-pages-box .rate_t3 .cir {\n    width: var(--info-circle-size);\n    height: var(--info-circle-size);\n    margin: 0;\n    padding: 0;\n    transform: rotate(-90deg);\n}\n.list-pages-box .rate_t3 .rad {\n    width: calc(100% - 2px);\n    height: 0;\n    padding: calc(50% - 1px) 0 0;\n    margin: 0;\n    border: solid var(--info-border-color);\n}\n.list-pages-box .rate_t3 .rad_def {\n    background: gray;\n    border-radius: 50%;\n    width: calc(100% - 2px);\n    height: 0;\n    padding: calc(100% - 2px) 0 0;\n    margin: 0;\n    border: 1px solid var(--info-border-color);\n}\n.list-pages-box .rate_t3 .uv {\n    border-radius: 100rem 100rem 0 0;\n    background: var(--info-up-bg);\n    border-width: 1px 1px 0;\n}\n.list-pages-box .rate_t3 .dv {\n    border-radius: 0 0 100rem 100rem;\n    background: var(--info-down-bg);\n    border-width: 0 1px 1px;\n}\n.list-pages-box .rate_t3 td {\n    border: none;\n}\n[[/module]]\n\n[[module ListPages name=\"=\"]]\n[[table class=\"rate_t3\"]]\n[[row]]\n[[cell colspan=\"2\" style=\"display:[[#ifexpr %%rating_votes%% == 0 | none | table-cell ]];\"]]\n[[div class=\"wrap\"]]\n[[div class=\"cir\" style=\"transform: rotate([[#expr (%%rating_votes%%-%%rating%%)/2/%%rating_votes%%*(-180)]]deg)\"]]\n[[div class=\"rad uv\"]]\n[[/div]]\n[[div class=\"rad dv\"]]\n[[/div]]\n[[/div]]\n[[/div]]\n[[/cell]]\n[[cell colspan=\"2\" style=\"display:[[#ifexpr %%rating_votes%% == 0 | table-cell | none ]];\"]]\n[[div class=\"wrap\"]]\n[[div class=\"cir\"]]\n[[div class=\"rad_def\"]]\n[[/div]]\n[[/div]]\n[[/div]]\n[[/cell]]\n[[/row]]\n\n[[row style=\"display: [[#ifexpr %%rating_votes%% == 0 | none | table-row ]];\"]]\n[[cell style=\"text-align: left;\"]]\n[[#expr 100 - (%%rating_votes%%-%%rating%%)/2/%%rating_votes%%*100*100%10000/100]]%\n(+[[#expr (%%rating%%+%%rating_votes%%)/2]])\n[[/cell]]\n[[cell style=\"text-align: right;\"]]\n[[#expr (%%rating_votes%%-%%rating%%)/2/%%rating_votes%%*100*100%10000/100]]%\n(-[[#expr (%%rating_votes%%-%%rating%%)/2]])\n[[/cell]]\n[[/row]]\n\n[[row style=\"display:[[#ifexpr %%rating_votes%% == 0 | table-row | none ]];\"]]\n[[cell style=\"text-align: left;\"]]\n-%\n(+0)\n[[/cell]]\n[[cell style=\"text-align: right;\"]]\n-%\n(-0)\n[[/cell]]\n[[/row]]\n\n[[/table]]\n[[/module]]\n[!-- --]\n\n[[iftags +component]]\n\n> The **Rating Info** component was originally created by [[*user 7happy7]], and then adapted by [[*user EstrellaYoshte]] to be compliant with the English wiki's Tech Policy as the **Ratio Bar**.\n\n[[div style=\"border: 1px solid #ddd; padding: 1em;\"]]\nTo add the Ratio Bar, insert the following after any theme {{[[include]]}}:\n\n> {{@@[[include :scp-wiki:component:ratio-bar base=--]]@@}}\n\nWhich will add it any existing rating module:\n[[=image ratio1.png width=\"50%\"]]\n\n\nFor certain themes that more heavily alter the rating module, such as [[[theme:black-highlighter-theme|]]], [[[theme:basalt|]]] and [[[theme:inkblot|]]], you will need another parameter:\n\n> {{@@[[include :scp-wiki:component:ratio-bar base=-- |ex=--]]@@}}\n\nThe extended compatibility parameter is meant to cover for cases when the standard rating module is extensively styled by a theme's CSS.\n\nGenerally, this parameter is meant for BHL and BHL-based themes. Otherwise, start with the {{base}} parameter and add {{@@|ex=--@@}} wherever needed.\n\n@@ @@\n-----\n@@ @@\n\nThere is also a standalone pie chart module:\n\n> {{@@[[include :scp-wiki:component:ratio-bar pie=--]]@@}}\n\nAs a usage suggestion, this could be put inside an Info module or something similar:\n\n[[=image ratio2.png width=\"60%\"]]\n\n> {{@@[[include :scp-wiki:info:start]]@@}}\n> @@**SCP-XXXX:** TITLE@@\n> @@**NAME OF TALE/GOI-FORMAT**@@\n> {{@@[[include component:ratio-bar pie=--]]@@}}\n> {{@@[[include :scp-wiki:info:end]]@@}}\n\n[[/div]]\n\n[[/iftags]]",
  "tags": [
    "co-authored",
    "component"
  ],
  "author": "EstrellaYoshte",
  "created_at": "2021-08-22T23:32:43+00:00",
  "updated_at": "2023-02-10T10:50:47+00:00",
  "rating": 20,
  "_site": "scp-wiki",
  "_fullname": "component:ratio-bar"
}