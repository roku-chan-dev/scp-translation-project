{
  "title": "SCP-132-JP-2 収容用紙",
  "content": "[[module css]]\n#html-body {\n  background-color:#f8f8f8;\n}\n#side-bar .side-block {\n  background-color:#f8f8f8;\n}\niframe.html-block-iframe{\n  max-width: 75vh;\n}\ndiv#container-wrap{\nbackground: url(http://scp-jp-storage.wdfiles.com/local--files/file%3A4510788-1-tkeb/body_bg.png) top left repeat-x;\nbackground-size:100px;\n}\n[[/module]]\n\n[[include credit:start]]\n**タイトル:** SCP-132-JP-2 収容用紙\n**著者:** [[*user hedalu244]]\n**オリジナル:** [[[SCP-132-JP]]] by [[*user locker]]\n[[include credit:end]]\n\n[[=]]\n[[html]]\n<link rel=\"preconnect\" href=\"https://fonts.gstatic.com\">\n<link href=\"https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@600&display=swap\" rel=\"stylesheet\">\n<style>\n@import url(http://scp-jp.wdfiles.com/local--files/japanese-syntax/scp-WikidotCss.css);\nhtml {\n  font-size: 2vw;\n}\n.g{\n  position: relative;\n  width: 42rem;\n  height: 60rem;\n  margin: 4rem;\n\n  font-size: 1.2rem;\n  background-color:#f9f8f6;\n  box-shadow: -1rem -1rem 1rem rgba(255, 255, 255, 0.5), 1rem 2rem 2rem rgba(0, 0, 0, 0.1);\n  user-select:none;\n  font-family: 'Noto Serif JP', serif;\n  background: linear-gradient(145deg, #e7e6e4, #fff);\n}\n.shadow {\n  z-index: -1;\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: -2rem;\n  height: 2rem;\n  background: linear-gradient(90deg, transparent, #000 5%, #000 30%, transparent);\n}\n.g::before{\n  content: \"\";\n  z-index: 1;\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: -4.3rem;\n  height: 4rem;\n  background-color: #f8f8f8;\n  border-radius: 10% 90% 0 0 / 15% 50% 0 0;\n  box-shadow: 0 0 0.5rem 0.5rem #f8f8f8;\n}\n.g::after{\n  content: \"\";\n  z-index: 1;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: -2.5rem;\n  width: 2rem;\n  background-color: #f8f8f8;\n  border-radius: 0 0 0 50% / 0 0 0 90%;\n  box-shadow: 0 0 0.5rem 0.5rem #f8f8f8;\n}\n</style>\n<div class=\"g\" unselectable=\"on\"><div class=\"shadow\"></div></div>\n<script>/*\nt : type\np: position\nv: velocity\na: accelaration\nd: dom element / direction\ng: gauge\nc: count\nl: lifespan\ns : str\n*/\n\n(function () {\n  function Vector(x, y, z) { return { x: x, y: y, z: z }; }\n  function vLength(a) { return Math.sqrt(vLength2(a)); }\n  function vLength2(a) { return a.x * a.x + a.y * a.y + a.z * a.z; }\n  function vNormal(a) { return vLength2(a) === 0 ? Vector(0, 0, 0) : vScale(a, 1 / vLength(a)); }\n  function vClone(a) { return Vector(a.x, a.y, a.z); }\n  function vAddTo(a, b) { a.x += b.x, a.y += b.y, a.z += b.z; }\n  function vAdd(a, b) { return Vector(a.x + b.x, a.y + b.y, a.z + b.z); }\n  function vSub(a, b) { return Vector(a.x - b.x, a.y - b.y, a.z - b.z); }\n  function vCross(a, b) { return Vector(a.y * b.z - a.z * b.y, a.z * b.x - a.x * b.z, a.x * b.y - a.y * b.x); }\n  function vScale(a, b) { return Vector(a.x * b, a.y * b, a.z * b); }\n\n  function simplexNoise(x, y, z) {\n    var a = Math.floor(x);\n    var b = Math.floor(y);\n    var c = Math.floor(z);\n\n    var d = j(h(x));\n    var e = j(h(y));\n    var f = j(h(z));\n\n    var g = [\n      k(a, b, c),\n      k(a + 1, b, c),\n      k(a, b + 1, c),\n      k(a + 1, b + 1, c),\n      k(a, b, c + 1),\n      k(a + 1, b, c + 1),\n      k(a, b + 1, c + 1),\n      k(a + 1, b + 1, c + 1),\n    ];\n\n    return i(\n      i(\n        i(g[0], g[1], d),\n        i(g[2], g[3], d), e),\n      i(\n        i(g[4], g[5], d),\n        i(g[6], g[7], d), e), f);\n\n    function h(x) {\n      return x - Math.floor(x);\n    }\n    function i(a, b, r) {\n      return a + r * (b - a);\n    }\n    function j(x) {\n      x = Math.min(Math.max(x, 0), 1);\n      return x * x * (3 - 2 * x);\n    }\n    function k(x, y, z) {\n      return h(Math.sin((x * 12.9898 + y * 78.233 + z * 49.038) + 1488) * 43758.5453) * 2 - 1;\n    }\n  }\n\n  const TURN = 3;\n  const RESISTANCE = 0.12;\n  const KEEP = 0.009;\n  const EVEN_Y = 0.04;\n  const EVEN_Z = 0.1;\n  const ALIGNMENT = 0.08;\n  const COHETION = 0.00025;\n  const SEPARATION = 0.005;\n  const DISTURB = 0.05;\n  const NOISE = 0.0015;\n  const FLOAT = 0.0025;\n  const TEXT_ALIGNMENT = 0.00025;\n  const WIDTH = 420;\n  const HEIGHT = 600;\n\n  const SIGHT = 20;\n  const RADIUS = 12;\n\n  const THING = 0;\n  const DIALOGUE = 1;\n  const AQUEOUS = 2;\n  const BOID = 3;\n  const BUBBLE = 4;\n  const CHAR = 5;\n\n  function Thing(pos, g) {\n    var a = {};\n    a.t = THING;\n    a.p = pos;\n    a.g = g;\n    return a;\n  }\n  function Dialogue(s, pos, g) {\n    var a = Thing(pos, g);\n    a.t = DIALOGUE;\n    vAddTo(a.p, Vector(-10 * s.length, 0, 0));\n    a.s = s;\n    a.count = 0;\n    if (a.p.x < 0)\n      a.p.x = 0;\n    if (WIDTH - 20 * s.length < a.p.x)\n      a.p.x = WIDTH - 20 * s.length;\n    return a;\n  }\n  function Aqueous(character, pos, vel, g) {\n    var a = Thing(pos, g);\n    a.t = AQUEOUS;\n    a.p = pos;\n    a.v = vel;\n    a.a = Vector(0, 0, 0);\n    a.d = document.createElement(\"span\");\n    a.d.style.position = \"absolute\";\n    a.d.textContent = character;\n    g.appendChild(a.d);\n    return a;\n  }\n  function Bubble(character, pos, g, boid) {\n    var a = Aqueous(character, pos, Vector(\n      (Math.random() - 0.5) * 0.11,\n      (Math.random() - 0.5) * 0.015,\n      (Math.random() - 0.5) * 0.05), g);\n    a.t = BUBBLE;\n    a.l = 20;\n    a.c = 0;\n    a.b = boid;\n    a.d.style.color = \"#444\";\n    a.d.style.transform = \"rotateZ(10deg)\";\n    return a;\n  }\n  function DialogueChar(character, pos, r, l, prev, g) {\n    var a = Aqueous(character, pos, Vector(\n      (Math.random() - 0.5) * 0.11,\n      (Math.random() - 0.5) * 0.015,\n      (Math.random() - 0.5) * 0.05), g);\n    a.t = CHAR;\n    a.r = r;\n    a.l = l;\n    a.c = 0;\n    a.d.style.color = \"#444\";\n    a.d.style.transform = \"rotateZ(\" + r + \"deg)\";\n    a.prev = prev;\n    return a;\n  }\n  function Boid(pos, vel, g) {\n    var a = Aqueous([\"ゆ\", \"ゆ\", \"ゅ\"][Math.floor(Math.random() * 3)], pos, vel, g);\n    a.t = BOID;\n    a.d.style.position = \"absolute\";\n    a.d.style.color = \"#000\";\n    a.m = Math.random() * 10;\n    a.dc = Math.random() * 5000;\n    return a;\n  }\n\n  function update(a, d) {\n    if (a.t == BUBBLE || a.t == CHAR || a.t == BOID) {\n      vAddTo(a.v, a.a);\n      vAddTo(a.p, vScale(a.v, d));\n      a.a = Vector(0, 0, 0);\n\n      if (a.p.x < 0) a.p.x = 0;\n      if (WIDTH - RADIUS < a.p.x) a.p.x = WIDTH - RADIUS;\n      if (a.p.y < 0) a.p.y = 0;\n      if (HEIGHT - RADIUS < a.p.y) a.p.y = HEIGHT - RADIUS;\n    }\n  }\n\n  function control(a, things, dist) {\n    if (a.t == DIALOGUE) {\n      if (a.count % 10 == 0) {\n        things.push(a.prev = DialogueChar(a.s.charAt(0), vClone(a.p), Math.random() * 20 - 10, 300, a.prev, a.g));\n        a.s = a.s.substring(1);\n        a.p.x += 20;\n      }\n      a.count++;\n    }\n    if (a.t == BUBBLE) {\n      float(a);\n      resistance(a);\n      noise(a, performance.now());\n      a.c++;\n    }\n    if (a.t == CHAR) {\n      resistance(a);\n      textAlignment(a);\n      noise(a, performance.now());\n      a.c++;\n    }\n    if (a.t == BOID) {\n      turn(a);\n      resistance(a);\n      noise(a, performance.now());\n      keep(a);\n      even(a);\n      disturb(a, dist);\n      var visibleBoids = things.filter(function (x) {\n        return a !== x && x.t == BOID && vLength2(vSub(a.p, x.p)) < SIGHT * SIGHT;\n      });\n      separation(a, things);\n      alignment(a, visibleBoids);\n      cohesion(a, visibleBoids);\n\n      a.m++;\n      if (20 < a.m) {\n        if (visibleBoids.length <= 0)\n          things.push(Bubble([\".\", \"*\", \"・\", \"゜\"][Math.floor(Math.random() * 4)], vSub(vClone(a.p), vScale(a.v, 100)), a.g, a));\n        a.m -= 5 + Math.random() * 10;\n      }\n      a.dc--;\n      if (a.dc <= 0) {\n        if (visibleBoids.length <= 1) {\n          var option = [\n            \"おはよう\",\n            \"おやすみ\",\n            \"ごめんね\",\n            \"うれしいな\",\n            \"おいしい\",\n            \"ありがとう\",\n            \"ありがとう\",\n            \"やったね\",\n            \"やったね\",\n            \"およぐ\",\n            \"およぐれんしゅう\",\n            \"あつまる\",\n            \"あつまるれんしゅう\",\n            \"やすむ\",\n            \"うんどう\",\n            \"おはなし\",\n            \"ごはん\",\n            \"れんしゅう\",\n            \"すすめー\",\n            \"すすめー\",\n            \"すすめー\",\n            \"おなかすく\",\n            \"おなかすいた\",\n            \"ごはんくれ\",\n            \"まぜてー\",\n            \"まぜてー\",\n            \"これでよし\",\n            \"もうひとふんばり\",\n            \"ごはんさがそうよ\",\n            \"だいじょうぶ？\",\n            \"どうしたの？\",\n            \"ごはんおいしかた\",\n            \"こっちだよ\",\n            \"こっちだよ\",\n            \"こっちだよ\",\n            \"こっち\",\n            \"こっち\",\n            \"おいで\",\n            \"おいで\",\n            \"こまったね\",\n            \"ねれない\",\n            \"ねむくなる\",\n            \"ねむい\",\n            \"ねむい\"];\n          things.push(Dialogue(option[Math.floor(Math.random() * option.length)],\n            vClone(a.p), a.g));\n        }\n        a.dc = 5000 + Math.random() * 2000;\n      }\n    }\n  }\n\n  function check(a, things) {\n    switch (a.t) {\n      case DIALOGUE:\n        return a.s != \"\";\n      case BUBBLE:\n        var flag = a.c < a.l;\n        if (flag)\n          for (var i = 0; i < things.length; i++)\n            if (things[i] != a.b && things[i].t == BOID && vLength2(vSub(a.p, things[i].p)) < 300) { flag = false; break; }\n        if (!flag) a.g.removeChild(a.d);\n        return flag;\n      case CHAR:\n        if (a.l <= a.c) a.g.removeChild(a.d);\n        return a.c < a.l;\n    }\n    return true;\n  }\n\n  function render(a) {\n    switch (a.t) {\n      case BUBBLE:\n        a.d.style.left = a.p.x * 0.1 + \"rem\";\n        a.d.style.top = a.p.y * 0.1 + \"rem\";\n        a.d.style.opacity = a.c < 5 ? 0 : Math.min(1, (a.l - a.c) / 10);\n        return;\n      case CHAR:\n        a.d.style.left = a.p.x * 0.1 + \"rem\";\n        a.d.style.top = a.p.y * 0.1 + \"rem\";\n        a.d.style.opacity = Math.min(1, (a.l - a.c) / 10, a.c / 10);\n        return;\n      case BOID:\n        a.d.style.left = a.p.x * 0.1 + \"rem\";\n        a.d.style.top = a.p.y * 0.1 + \"rem\";\n        a.d.style.opacity = 1 - Math.pow(1 - (Math.abs(Math.atan2(a.v.x, a.v.z)) / Math.PI), 4);\n\n        a.d.style.transform = \"rotateY(\" + (-Math.atan2(a.v.x, a.v.z) / Math.PI * 180 + 90) + \"deg)\" + \"rotateZ(\" + (-Math.atan2(Math.sqrt(a.v.x * a.v.x + a.v.z * a.v.z), a.v.y) / Math.PI * 180 + 90) + \"deg)\";\n        return;\n    }\n  }\n\n  function float(a) {\n    vAddTo(a.a, Vector(0, -FLOAT, 0));\n  }\n  function resistance(a) {\n    vAddTo(a.a, vScale(a.v, -RESISTANCE));\n  }\n  function noise(a, t) {\n    vAddTo(a.a, vScale(Vector(\n      simplexNoise(a.p.x / 200, a.p.y / 200, t / 500),\n      simplexNoise(a.p.x / 200, a.p.y / 200, (50 + t) / 500),\n      simplexNoise(a.p.x / 200, a.p.y / 200, (100 + t) / 500)\n    ), NOISE));\n  }\n  function keep(a) {\n    vAddTo(a.a, vScale(vNormal(a.v), KEEP));\n  }\n  function even(a) {\n    vAddTo(a.a, Vector(0, a.v.y * -EVEN_Y, a.p.z * (Math.abs(a.v.z) + 0.001) * -EVEN_Z));\n  }\n  function separation(a, things) {\n    var visibleBoids = things.filter(function (x) {\n      return a !== x && (x.t == BOID || x.t == CHAR) && vLength2(vSub(a.p, x.p)) < SIGHT * SIGHT;\n    });\n    for (var i = 0; i < visibleBoids.length; i++)\n      vAddTo(a.a, vScale(vNormal(vSub(a.p, visibleBoids[i].p)), SEPARATION));\n  }\n  function alignment(a, visibleBoids) {\n    if (visibleBoids.length !== 0) {\n      var sumV = Vector(0, 0, 0);\n      for (var i = 0; i < visibleBoids.length; i++) vAddTo(sumV, visibleBoids[i].v);\n      var aveV = vScale(sumV, 1 / visibleBoids.length);\n      vAddTo(a.a, vScale(vSub(aveV, a.v), ALIGNMENT));\n    }\n  }\n  function cohesion(a, visibleBoids) {\n    if (visibleBoids.length !== 0) {\n      var sumP = Vector(0, 0, 0);\n      for (var i = 0; i < visibleBoids.length; i++) vAddTo(sumP, visibleBoids[i].p);\n      var aveP = vScale(sumP, 1 / visibleBoids.length);\n      vAddTo(a.a, vScale(vSub(aveP, a.p), COHETION));\n    }\n  }\n  function turn(a) {\n    var wall = Vector(0, 0, 0);\n    if (a.p.x < SIGHT)\n      vAddTo(wall, Vector(1, 0, 0));\n    if (WIDTH - SIGHT < a.p.x)\n      vAddTo(wall, Vector(-1, 0, 0));\n    if (a.p.y < SIGHT)\n      vAddTo(wall, Vector(0, 0.2, 0));\n    if (HEIGHT - SIGHT < a.p.y)\n      vAddTo(wall, Vector(0, -0.2, 0));\n    vAddTo(a.a, vScale(vCross(a.v, vCross(wall, a.v)), TURN));\n  }\n  function disturb(a, dist) {\n    if (dist.c < 0 && dist.y1 < a.p.y && a.p.y < dist.y2 && dist.d * a.v.x < -0.025) {\n      a.a.x = dist.d * DISTURB;\n    }\n  }\n  function textAlignment(a) {\n    if (a.prev) vAddTo(a.a, vScale(vSub(vAdd(a.prev.p, Vector(20, 0, 0)), a.p), TEXT_ALIGNMENT));\n  }\n  function apply(g) {\n    var things = [];\n    var p = Vector(\n      Math.random() * WIDTH,\n      Math.random() * HEIGHT,\n      0\n    );\n    var v = Vector(\n      (Math.random() - 0.5) * 0.125,\n      (Math.random() - 0.5) * 0.015,\n      (Math.random() - 0.5) * 0.05);\n\n    for (var i = 0; i < 20; i++) {\n      if (Math.random() < 0.5) {\n        p = vAdd(p, Vector(\n          (Math.random() - 0.5) * 40,\n          (Math.random() - 0.5) * 40,\n          0));\n        v = vAdd(v, Vector(\n          (Math.random() - 0.5) * 0.01,\n          (Math.random() - 0.5) * 0.01,\n          (Math.random() - 0.5) * 0.01));\n        if (p.x < 0) p.x = -p.x;\n        if (WIDTH < p.x) p.x = 2 * WIDTH - p.x;\n        if (p.y < 0) p.y = -p.y;\n        if (HEIGHT < p.y) p.y = 2 * HEIGHT - p.y;\n      }\n      else {\n        p = Vector(\n          Math.random() * WIDTH,\n          Math.random() * HEIGHT,\n          0);\n        v = Vector(\n          (Math.random() - 0.5) * 0.125,\n          (Math.random() - 0.5) * 0.015,\n          (Math.random() - 0.5) * 0.05);\n      }\n      things.push(Boid(p, v, g));\n    }\n    var last = performance.now();\n    var dist = {\n      c: 0,\n      y1: 0,\n      y2: 0,\n      d: 1,\n    };\n    tick();\n    function tick() {\n      requestAnimationFrame(tick);\n      var now = performance.now();\n      var d = Math.min(now - last, 40);\n\n      dist.c++;\n      if (100 < dist.c) {\n        var ncount = 0, pcount = 0;\n        var y1 = Math.random() * (HEIGHT - 80) + 40;\n        var y2 = y1 + Math.random() * 10 + 30;\n        y1 = 2 * y1 - y2;\n        for (var i = 0; i < things.length; i++) if (things[i].t == BOID) {\n          if (things[i].v.x < 0) ncount++;\n          if (0 < things[i].v.x) pcount++;\n        }\n        if (ncount < (ncount + pcount) * 0.2) dist = {\n          c: -50,\n          y1: y1,\n          y2: y2,\n          d: -1,\n        };\n        else if (pcount < (ncount + pcount) * 0.2) dist = {\n          c: -50,\n          y1: y1,\n          y2: y2,\n          d: 1,\n        };\n        else dist.c = 0;\n      }\n\n      for (var i = 0; i < things.length; i++) control(things[i], things, dist);\n      var newThings = [];\n      for (i = 0; i < things.length; i++) if (check(things[i], things)) newThings.push(things[i]);\n      things = newThings;\n      for (i = 0; i < things.length; i++) update(things[i], d);\n      for (i = 0; i < things.length; i++) render(things[i]);\n\n      last = now;\n    }\n  }\n\n  var gs = document.getElementsByClassName(\"g\");\n  for (var j = 0; j < gs.length; j++)\n    apply(gs[j]);\n})();\n\n</script>\n[[/html]]\n[[/=]]",
  "tags": [
    "jp",
    "アートワーク"
  ],
  "author": "hedalu244",
  "created_at": "2020-04-06T13:04:02+00:00",
  "updated_at": "2021-01-19T10:28:57+00:00",
  "rating": 438,
  "_site": "scp-jp",
  "_fullname": "scp-132-jp-animation"
}