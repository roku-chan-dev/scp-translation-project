{
  "title": "为你的个人页面添加看板娘",
  "content": "[[include :scp-wiki:component:fade-in speed=1]]\n[[include :scp-wiki-cn:theme:black-highlighter-theme]]\n[[include :scp-wiki-cn:theme:jakstyle]]\n[[include :scp-wiki-cn:theme:gsk]]\n\n[[module css]]\n@media only screen and (max-width: 600px) {\n  .pconly {\n    display: none;\n  }\n}\n[[/module]]\n\n[[>]]\n[[module rate]]\n[[/>]]\n\n[[div style=\"width: 250px;height:250px;position: fixed;bottom: 20px;right: 30px;\" class=\"pconly\"]]\n[[html]]\n<iframe id=\"inlineFrameExample\"\n    width=\"250px\"\n    height=\"250px\"\n    src=\"https://msjand.github.io/\"\n    frameborder=\"no\"\n>\n</iframe>\n[[/html]]\n[[/div]]\n\n经过了一周的摸索，终于在今天以一种诡异的方式解决了在wikidot上添加live2d的功能\n\n++ 如果看不到请开个梯子\n\n+++++ ##red|另附[[*user Etinjat]]的建议：总之能在作者页上自娱自乐，但不能用于其他正式页面##\n\n如果你想加上我这个live2d（我个人的live2模型），请在页面上加上这段代码：\n\n> @@[[div style=\"width: 250px;height:250px;position: fixed;bottom: 20px;right: 30px;\" class=\"pconly\"]]@@\n> @@[[html]]@@\n> <iframe id=\"inlineFrameExample\"\n>     width=\"250px\"\n>     height=\"250px\"\n>     src=\"https://msjand.github.io/\"\n>     frameborder=\"no\"\n> >\n> </iframe>\n> @@[[/html]]@@\n> @@[[/div]]@@\n\n值得注意的是，考虑到手机浏览屏幕比较小，我在wikidot页面顶部增加了一段手机端隐藏的css\n\n> [[module css]]\n> @media only screen and (max-width: 600px) {\n>   .pconly {\n>     display: none;} }\n> [[module]]\n\n并且它只适用于gsk主题（因为背景是灰黑色的），如果你想定制一个自己的live2d就请往下继续翻吧\n\n\n\n大图示例：\n\n\n[[collapsible show=\"+ 打开大屏\" hide=\"- 关闭\"]]\n[[html]]\n<style>\n\t.iframe-body-sty{position: relative;overflow: hidden;height:600px;width: 1200px;background-color: red;}\n\t.iframe-body-sty>#iframe-shrink{position: absolute;transform:scale(0.55);left: -400px;top: -170px;}\n</style>\n\n<iframe id=\"iframe-shrink\" src=\"https://msjand.github.io/\" width=\"1920px\" height=\"920px\" frameborder=\"no\"></iframe>\n\n[[/html]]\n[[/collapsible]]\n\n[[[https://msjand.github.io/|放live2d的页面]]]\n\n++ 如果看不到请开个梯子\n@@ @@\n@@ @@\n@@ @@\n@@ @@\n----\n@@ @@\n@@ @@\n+ 如何制作一个自己的live2d版娘\n\n由于拉跨的Wikidot不支持在上面直接放这些代码，于是我找了个使用iframe取巧的办法\n\n首先我主要参考了[[[https://github.com/guansss/pixi-live2d-display|这↑里↓]]]的方法和代码，因此如果你的模型不是model3.json的话就得劳烦您去看一下他的说明书了\n说明文档页面：https://github.com/guansss/pixi-live2d-display/blob/master/README.zh.md\n\n@@ @@\n@@ @@\n\n++ 1.你需要拥有一个自己的网页，以便显示你的人物模型\n\n我个人推荐是在GitHub上建立一个仓库以及相关的页面，你可以在[[[https://docs.github.com/zh/pages|这↑里↓]]]，或者百度上找到相关方法，我就不过多赘述了\n\n@@ @@\n@@ @@\n\n++ 2.上传你的模型文件\n\n你需要将你的模型文件（连带整个文件夹，如果文件过大可以使用客户端）上传到你的github上，如果这一步成功的话，你会在你github仓库的文件夹里找到这个文件\n\n> XXXX.model3.json\n\nGitHub网页中点击打开，然后你会在一大串代码中找到这个**raw**，点进去（可能需要梯子）：\n\n> [[=image https://scpsandboxcn.wikidot.com/local--files/jand-test/raw.png]]\n\n然后复制下它的网页链接（url），这就是你模型的链接\n\n如果需要在国内显示的话，我建议使用CDN网络加速后的链接，具体用法很简单，在你做完上面的上传步骤后，你在后面使用的模型链接就应该为：\n\n> @@https://cdn.jsdelivr.net/gh/<用户名>/<仓库名>/<文件及路径>@@\n\n这样（应该）就能免受github爬梯子加速器的苦了，如果实在不行那就爬梯子吧（悲\n\n@@ @@\n@@ @@\n\n++ 3.放置你的网页\n\n复制下面这段代码到txt当中，然后重命名为index.html\n\n[[code html]]\n<!DOCTYPE html>\n<html>\n<head>\n</head>\n\n<style>\n  body {\n    overflow: hidden;\n    background-color: 1A1A1A;\t\n  }\n</style>\n\n<body>\n<script src=\"https://cubism.live2d.com/sdk-web/cubismcore/live2dcubismcore.min.js\"></script>\n<script src=\"https://cdn.jsdelivr.net/gh/dylanNew/live2d/webgl/Live2D/lib/live2d.min.js\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/pixi.js@6.5.2/dist/browser/pixi.min.js\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/pixi-live2d-display/dist/index.min.js\"></script>\n\n\n<canvas id=\"canvas\" width=\"878\" height=\"792\"></canvas>\n\n<script>\nconst cubism4Model =\n  \"https://raw.githubusercontent.com/msjand/live2d-jand/main/%E6%B3%A2%E5%A5%87%E9%85%B1live2d/%E6%B3%A2%E5%A5%87%E9%85%B11.model3.json\";  //这里改你的模型文件\n\n(async function main() {\n  const app = new PIXI.Application({\n    view: document.getElementById(\"canvas\"),\n    autoStart: true,\n    resizeTo: window,\n    backgroundColor: 0x1A1A1A   //设置背景颜色\n  });\n\n  const model4 = await PIXI.live2d.Live2DModel.from(cubism4Model);\n\n  app.stage.addChild(model4);\n\n  model4.scale.set(0.1);   //调整模型的大小\n\n  model4.x = -50;   //调整模型x轴位置\n  model4.y = -50;   //调整模型y轴位置\n})();\n\n  models.forEach((model) => {\n    app.stage.addChild(model);\n\n    const scaleX = (innerWidth * 0.4) / model.width;\n    const scaleY = (innerHeight * 0.8) / model.height;\n\n    // 适应窗口\n  model.scale.set(Math.min(scaleX, scaleY));\n  model.y = innerHeight * 0.1;\n    });\n\n</script>\n\n\n</body>\n</html>\n[[/code]]\n\n将里面这段代码换成**你的模型链接**\n\n[[code html]]\nconst cubism4Model =\n  \"https://raw.githubusercontent.com/msjand/live2d-jand/main/%E6%B3%A2%E5%A5%87%E9%85%B1live2d/%E6%B3%A2%E5%A5%87%E9%85%B11.model3.json\";  //这里改你的模型文件\n[[/code]]\n\n你还可以更改其中的背景颜色，x后面接16位的色值，挑一个你页面上能用的就行\n\n[[code html]]\n    backgroundColor: 0x1A1A1A\n[[/code]]\n\n然后保存\n\n等一会，不出意料的话你就可以在你@@github.io@@的页面上看到你的模型了\n\n就像这个：https://msjand.github.io/\n\n@@ @@\n@@ @@\n\n++ 4.把板娘放到你的wikidot页面中\n\n把这段代码抄到你的页面上就大功告成了\n\n建议一起放在文章最上面\n\n> [[module css]]\n> @media only screen and (max-width: 600px) {\n>   .pconly {\n>     display: none;} }\n> [[module]]\n\n> @@[[div style=\"width: 250px;height:250px;position: fixed;bottom: 20px;right: 30px;\" class=\"pconly\"]]@@\n> @@[[html]]@@\n> <iframe id=\"inlineFrameExample\"\n>     width=\"250px\"\n>     height=\"250px\"\n>     src=\"https://msjand.github.io/\"\n>     frameborder=\"no\"\n> >\n> </iframe>\n> @@[[/html]]@@\n> @@[[/div]]@@\n\n你也可以更改其中iframe标签的参数以及div块的参数调整，以及增加阴影、边框、文字之类的，但再此就不过多赘述了\n\n最后特别感谢[[*user Dr Ink_233]]和其他/她几位大佬一直在帮忙改进代码\n\n@@ @@\n@@ @@\n@@ @@\n@@ @@\n@@ @@\n\n++ 5.补充部分\n+++ 这里是为继续优化live2d位置、交互等功能设置的说明页面\n\n同样的，主要参考了[[[https://github.com/guansss/pixi-live2d-display|这里]]]的用法\n\n++++ 首先是位置部分\n\n你能在第三部分你的github.io网页代码中找到这一段代码\n[[code html]]\n  model4.scale.set(0.1);\n\n  model4.x = -50;\n  model4.y = -50;\n[[/code]]\n\n它的主要功能是调整你模型的大小，比如这里就设置了原来大小的0.1，即10%\n\n[[code html]]\n  model4.scale.set(0.1);\n[[/code]]\n\n这里则是让模型整体上分别向左和向上移动了50个单位，相应的有：**负数向左，正数向右**\n\n[[code html]]\n  model4.x = -50;\n  model4.y = -50;\n[[/code]]\n\n如果你要添加一些鼠标点击交互\n可以参考[[[https://codepen.io/guansss/pen/KKgXBOP/left|这里]]]的示例\n我注释了我能看懂的部分\n\n[[code html]]\n\nconst cubism2Model =\n  \"https://cdn.jsdelivr.net/gh/guansss/pixi-live2d-display/test/assets/shizuku/shizuku.model.json\";\nconst cubism4Model =\n  \"https://cdn.jsdelivr.net/gh/guansss/pixi-live2d-display/test/assets/haru/haru_greeter_t03.model3.json\";\n\nconst live2d = PIXI.live2d;\n\n(async function main() {\n  const app = new PIXI.Application({\n    view: document.getElementById(\"canvas\"),\n    autoStart: true,\n    resizeTo: window,\n    backgroundColor: 0x333333\n  });\n\n  const models = await Promise.all([\n    live2d.Live2DModel.from(cubism2Model),\n    live2d.Live2DModel.from(cubism4Model)\n  ]);\n\n  models.forEach((model) => {\n    app.stage.addChild(model);\n\n    const scaleX = (innerWidth * 0.4) / model.width;\n    const scaleY = (innerHeight * 0.8) / model.height;\n\n    // fit the window\n    model.scale.set(Math.min(scaleX, scaleY));\n\n    model.y = innerHeight * 0.1;\n\n    draggable(model);   //让模型可拖动\n    addFrame(model);   //给模型增加边框\n    addHitAreaFrames(model);   //给模型增加标注点击区域框\n  });\n\n  const model2 = models[0];\n  const model4 = models[1];\n\n  model2.x = (innerWidth - model2.width - model4.width) / 2;\n  model4.x = model2.x + model2.width;\n\n  // 下面这一部分增加了交互区域\n\n  model2.on(\"hit\", (hitAreas) => {\n    if (hitAreas.includes(\"body\")) {\n      model2.motion(\"tap_body\");\n    }\n\n    if (hitAreas.includes(\"head\")) {\n      model2.expression();\n    }\n  });\n\n  model4.on(\"hit\", (hitAreas) => {\n    if (hitAreas.includes(\"Body\")) {\n      model4.motion(\"Tap\");\n    }\n\n    if (hitAreas.includes(\"Head\")) {\n      model4.expression();\n    }\n  });\n})();\n\n//↓可拖动功能的js代码\n\nfunction draggable(model) {\n  model.buttonMode = true;\n  model.on(\"pointerdown\", (e) => {\n    model.dragging = true;\n    model._pointerX = e.data.global.x - model.x;\n    model._pointerY = e.data.global.y - model.y;\n  });\n  model.on(\"pointermove\", (e) => {\n    if (model.dragging) {\n      model.position.x = e.data.global.x - model._pointerX;\n      model.position.y = e.data.global.y - model._pointerY;\n    }\n  });\n  model.on(\"pointerupoutside\", () => (model.dragging = false));\n  model.on(\"pointerup\", () => (model.dragging = false));\n}\n\n//↓增加边框的js代码\n\nfunction addFrame(model) {\n  const foreground = PIXI.Sprite.from(PIXI.Texture.WHITE);\n  foreground.width = model.internalModel.width;\n  foreground.height = model.internalModel.height;\n  foreground.alpha = 0.2;\n\n  model.addChild(foreground);\n\n  checkbox(\"Model Frames\", (checked) => (foreground.visible = checked));\n}\n\n//↓增加点击区域边框的js代码\n\nfunction addHitAreaFrames(model) {\n  const hitAreaFrames = new live2d.HitAreaFrames();\n\n  model.addChild(hitAreaFrames);\n\n  checkbox(\"Hit Area Frames\", (checked) => (hitAreaFrames.visible = checked));\n}\n\n//↓增加控制区域功能的js代码\n\nfunction checkbox(name, onChange) {\n  const id = name.replace(/\\W/g, \"\").toLowerCase();\n\n  let checkbox = document.getElementById(id);\n\n  if (!checkbox) {\n    const p = document.createElement(\"p\");\n    p.innerHTML = `<input type=\"checkbox\" id=\"${id}\"> <label for=\"${id}\">${name}</label>`;\n\n    document.getElementById(\"control\").appendChild(p);\n    checkbox = p.firstChild;\n  }\n\n  checkbox.addEventListener(\"change\", () => {\n    onChange(checkbox.checked);\n  });\n\n  onChange(checkbox.checked);\n}\n[[/code]]\n\n这里<style>标签以及@@<div id=\"control\"></div>@@则是增加控制区域的css&html代码，可以不添加\n[[code html]]\n\n<style>\n#control\n  position: absolute\n  top: 8px\n  left: 24px\n  color: white\n  font-size: 18px\n</style>\n\n<script src=\"https://cubism.live2d.com/sdk-web/cubismcore/live2dcubismcore.min.js\"></script>\n<script src=\"https://cdn.jsdelivr.net/gh/dylanNew/live2d/webgl/Live2D/lib/live2d.min.js\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/pixi.js@6.5.2/dist/browser/pixi.min.js\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/pixi-live2d-display/dist/index.min.js\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/pixi-live2d-display/dist/extra.min.js\"></script>\n\n<canvas id=canvas></canvas>\n\n<div id=\"control\"></div>\n[[/code]]\n\n\n@@ @@\n@@ @@\n@@ @@\n@@ @@\n@@ @@\n@@ @@",
  "tags": [
    "原创",
    "文章"
  ],
  "author": "Mr_J_AND",
  "created_at": "2022-12-31T14:43:54+00:00",
  "updated_at": "2023-01-13T16:28:14+00:00",
  "rating": 24,
  "_site": "scp-wiki-cn",
  "_fullname": "live-2d"
}